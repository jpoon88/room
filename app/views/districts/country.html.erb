<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>Google Maps JavaScript API Example</title>


<%= javascript_include_tag 'jquery-1.2.6.js' %>
<%= javascript_include_tag 'jquery.scrollTo-1.4.0-min.js' %>
<%= javascript_include_tag 'jquery.serialScroll-1.2.1-min.js' %>
<%= javascript_include_tag 'jquery.localscroll-1.2.6-min.js' %>
<%= javascript_include_tag 'thickbox-compressed.js' %>
<style type="text/css" media="all">
@import "/javascripts/thickbox.css";
</style>

<script type="text/javascript">
var stores = <%= @stores_hash.to_json %>;
var stores_by_year_month = <%=  @stores_by_year_month.to_json %>;
var counts_by_year_month = <%=  @counts_by_year_month.to_json %>;
</script>

<style type="text/css">

body {
background:#FFFFFF none repeat scroll 0 0;
color:#2B332E;
font-family:Arial,sans-serif;
height:100%;
line-height:1.4;
width:100%;
margin: 0;
padding: 0;
}

a {
  color:#2D7BB2;
  text-decoration: none;
}
a:hover {
color:#2B332E;
}

/* CALENDAR CHARTS */
table {
border-collapse:collapse;
border-spacing:0;
}

.module-content {
border:1px solid #C0CCC4;
overflow: auto; 
padding: 0.1em 16px;
margin: 2px 10px;
}

div.calendarchart {
float:left;
overflow:hidden;
position:relative;

padding-right: 16px;
}


.calendarchart {
float:left;
overflow:hidden;
position:relative;

}
.calendarchart h3, .calendarchart h2 {
clear:left;
float:left;
margin:0.5em 16px 0.25em 0;
}

.calendarchart .maxcount {
color:#A8B2AC;
font-size:0.75em;
margin:1em 0 0;
text-align:right;
}
.calendarchart table {
clear:both;
font-size:0.75em;
margin:0;
}
.calendarchart table td{
margin:0;
padding: 0;
border:0 none;

}

.calendarchart table .yearlabel {

padding-top:2.5em;
}
.calendarchart table .yearlabel a {
/* color:#808C85; */
font-weight:bold;

}
.calendarchart table .yearlabel a:hover {
/* color:#2B332E; */
}
.calendarchart table .day {
border-bottom:1px solid #DBE6DF;
border-top:1px solid #DBE6DF;
color:#808C85;
font-weight:bold;
height:100px;
padding:2px 2px 0; 
position:relative;
text-align:center;
vertical-align:bottom;
width: 2.2em;	

}
.calendarchart table .day a {
display:block;
height:100%;
position:relative;
}
.calendarchart table .day .label {
bottom:-2em;
left:0;
position:absolute;
text-align:center;
width:100%;
}
.calendarchart table .day .bar {
background:#A8B2AC none repeat scroll 0 0;
border-bottom:1px solid #A8B2AC;
bottom:0;
display:block;
overflow:hidden;
position:absolute;
text-indent:-9999px;
width:100%;
}

.calendarchart table .day .bar:hover {
background:#2D7BB2 none repeat scroll 0 0;
border-color:#2D7BB2;
}



</style>
</head>
<body>
	
<div ="header">
	Header
</div>
<div class="module-content">
	<div class="calendarchart">
	<h2><strong class="number"><%= @stores.size %></strong> stores</h2>
	<p class="maxcount">Peak of this chart: <%=h @max_count %> stores</p>
	<table class="calcharttable">
	<tbody>
	<tr>
<% @year_list.each do |year| %>	
  <% (1..12).to_a.each do |month| %>
   <td><div class='day'>
	<% if @counts_by_year_month["#{year}-#{month}"] %>
	<a title="test" href="#"><strong class="label"><%= Date::ABBR_MONTHNAMES[month] %></strong>
	<span class="bar" style="height: <%= (@counts_by_year_month["#{year}-#{month}"] * 100) / @max_count %>%;">( total)</span></a>
	 <% else  %>
 	 <strong class="label"><%= Date::ABBR_MONTHNAMES[month] %></strong>
	 <span style="height: 0px;"> </span> 
	 <% end %>
	 </div></td>
  <% end %>
<% end %>	
	</tr>	
	<tr>
	<% @year_list.each do |year| %>	
	   <th class="yearlabel" id="year_<%= year %>" colspan="12">
  	   <a href="/crime/by-date/2008/12/"><%= year %></a>
	   </th>
	<% end %>
	</tr>
	</tbody>
	</table>
	</div>

</div>	

<% @group_by_country.each do |key, countries| %>	
  <h2><%= key %></h2>
<% end  %>	
</body>
</html>
